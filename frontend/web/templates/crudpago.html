{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{% static 'crudpago/css/crudpago.css' %}">
    <title>CRUD de Tarjetas de Pago</title>
</head>
<body>
<div class="container">
    <h2>Compra de Mangas en Monites Chinos</h2>
    <div class="product-list">
        <h2>Tu compra:</h2>
        <ul id="product-list"></ul>
    </div>
    <div class="total">
        <h2>Total: <span id="total-amount">$0</span></h2>
    </div>

    <h2>Tarjetas Guardadas</h2>
    <table id="cards-table">
        <thead>
            <tr>
                <th>Número de Tarjeta</th>
                <th>Fecha de Expiración</th>
                <th>CVV</th>
                <th>Acción</th>
            </tr>
        </thead>
        <tbody id="cards-body">
            <!-- Filas para tarjetas de pago generadas dinámicamente -->
        </tbody>
    </table>

    <div class="add-card-section">
        <h2>Agregar Nueva Tarjeta de Pago</h2>
        <form>
            <label for="card_number">Número de Tarjeta:</label>
            <input type="text" id="card_number" name="card_number" pattern="[0-9]{16}" maxlength="16" placeholder="Ingrese el número de tarjeta de 16 dígitos" required><br>
            <label for="expiration_date">Fecha de Expiración:</label>
            <input type="text" id="expiration_date" name="expiration_date" pattern="(0[1-9]|1[0-2])\/[0-9]{2}" placeholder="MM/YY" required><br>
            <label for="cvv">CVV:</label>
            <input type="text" id="cvv" name="cvv" pattern="[0-9]{3,4}" maxlength="4" placeholder="Ingrese el CVV de 3 o 4 dígitos" required><br>
            <input type="submit" value="Agregar">
        </form>
        <button id="pay-button" style="display: none;">Comprar</button>
    </div>
</div>

<!-- Modal para editar tarjeta -->
<input type="checkbox" id="modal-toggle">
<div class="modal">
    <label for="modal-toggle" class="modal-close">&times;</label>
    <div class="modal-content">
        <h2>Editar Tarjeta de Pago</h2>
        <form id="edit-form"> <!-- Agregamos el identificador edit-form -->
            <label for="edit_card_number">Número de Tarjeta:</label>
            <input type="text" id="edit_card_number" name="edit_card_number" pattern="[0-9]{16}" maxlength="16" placeholder="Ingrese el número de tarjeta de 16 dígitos" required><br>
            <label for="edit_expiration_date">Fecha de Expiración:</label>
            <input type="text" id="edit_expiration_date" name="edit_expiration_date" pattern="(0[1-9]|1[0-2])\/[0-9]{2}" placeholder="MM/YY" required><br>
            <label for="edit_cvv">CVV:</label>
            <input type="text" id="edit_cvv" name="edit_cvv" pattern="[0-9]{3,4}" maxlength="4" placeholder="Ingrese el CVV de 3 o 4 dígitos" required><br>
            <input type="submit" value="Guardar Cambios">
        </form>
        <!-- Mensaje de cambios guardados -->
        <div id="save-message" class="saved-message">Datos guardados exitosamente</div>
    </div>
</div>

<script src="{% static 'crudpago/js/crudpago.js' %}"></script>
</body>
</html>
